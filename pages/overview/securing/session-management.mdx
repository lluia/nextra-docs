import { Callout } from "nextra/components";
import { Code } from "../../../components/Code/Code";
import { RichTabs } from "../../../components/RichTabs/RichTabs";
import { IdentificationBadge, HardDrives } from "@phosphor-icons/react";

# Handling sessions

Auth.js ships lightweight utilities to help you manage the user's session easily. You can manage the session either client side or server side. We usually recommend to handle session redirects or invalidation and the server level for a smoother user experience.

<RichTabs defaultValue="client">
  <RichTabs.TabList>
    <RichTabs.Tab value="client">
      <div className="flex flex-col justify-center items-center h-full">
        <IdentificationBadge fontSize="3rem" />
        <span>Client side</span>
      </div>
    </RichTabs.Tab>
    <RichTabs.Tab value="server">
      <div className="flex flex-col justify-center items-center h-full">
        <HardDrives fontSize="3rem" />
        <span>Server side</span>
      </div>
    </RichTabs.Tab>
  </RichTabs.TabList>
  <RichTabs.Panels>
  
  {/* <!-------------------------------> */}
  {/* <!---------- CLIENT TAB ---------> */}
  {/* <!-------------------------------> */}

  <RichTabs.Panel value="client" className="pt-0">

### Exposing the session

<Code>
<Code.Next>

To expose the user's session to components within Next.js we can use the built-in [`SessionProvider`]():

```ts filename="pages/_app.tsx"
import { SessionProvider } from "next-auth/react";
import type { AppProps } from "next/app";

export default function App({
  Component,
  pageProps: { session, ...pageProps },
}: AppProps) {
  return (
    <SessionProvider session={session}>
      <Component {...pageProps} />
    </SessionProvider>
  );
}
```

</Code.Next>
</Code>

### Reading the session

<Code>
<Code.Next>

Down the tree, you can now in components use the builtin [`useSession()`]() hook to gain access to the user's session data and authentication status:

```ts filename="pages/overview.tsx"
import { useSession, signIn, signOut } from "next-auth/react";

export default function Page() {
  const { data: session, status } = useSession();
  const userEmail = session?.user?.email;

  if (status === "loading") {
    return <p>Hang on there...</p>;
  }

  if (status === "authenticated") {
    return (
      <>
        <p>Signed in as {userEmail}</p>
        <button onClick={() => signOut()}>Sign out</button>
        <img src="https://cdn.pixabay.com/photo/2017/08/11/19/36/vw-2632486_1280.png" />
      </>
    );
  }

  return (
    <>
      <p>Not signed in.</p>
      <button onClick={() => signIn("github")}>Sign in</button>
    </>
  );
}
```

</Code.Next>
</Code>

</RichTabs.Panel>

{/* <!-------------------------------> */}
{/* <!---------- SERVER TAB ---------> */}
{/* <!-------------------------------> */}

<RichTabs.Panel value="server"  className="pt-0">

### Reading the session

...

### Redirects

...

</RichTabs.Panel>

</RichTabs.Panels>
</RichTabs>
